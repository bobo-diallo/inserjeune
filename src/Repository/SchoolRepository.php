<?php

namespace App\Repository;

use App\Entity\School;
use Doctrine\Bundle\DoctrineBundle\Repository\ServiceEntityRepository;
use App\Entity\City;
use App\Entity\Country;
use App\Entity\Region;
use Doctrine\Persistence\ManagerRegistry;

/**
 * SchoolRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class SchoolRepository extends ServiceEntityRepository
{
	public function __construct(ManagerRegistry $registry) {
		parent::__construct($registry, School::class);
	}

   /**
    * @param Country $country
    * @return array
    */
   public function getNameByCountry(Country $country)
   {
      return $this->createQueryBuilder('s')
         ->where('s.country = :country')
         ->setParameter('country', $country)
         ->getQuery()
         ->getResult();
   }

   /**
    * @param Region $region
    * @return array
    */
   public function getNameByRegion(Region $region)
   {
      return $this->createQueryBuilder('s')
         ->where('s.region = :region')
         ->setParameter('region', $region)
         ->getQuery()
         ->getResult();
   }

   /**
    * @param City $city
    * @return array
    */
   public function getNameByCity(City $city)
   {
      return $this->createQueryBuilder('s')
         ->where('s.city = :city')
         ->setParameter('city', $city)
         ->getQuery()
         ->getResult();
   }

    /**
     * @param City $city
     * @param \DateTime $createdDate
     * @return array
     */
    public function getByCityAndCreatedDate(City $city, $createdDate)
    {
        return $this->createQueryBuilder('s')
            ->where('s.city = :city')
            ->andWhere('s.createdDate = :createdDate')
            ->setParameters(['city' => $city, 'createdDate'=> $createdDate])
            ->getQuery()
            ->getResult();
    }

}
